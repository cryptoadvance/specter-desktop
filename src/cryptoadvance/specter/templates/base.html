<!DOCTYPE html>
<html>
<head>
	<link rel="shortcut icon" type="image/png" href="/static/img/icon.png"/>
	<title>Specter Desktop</title>
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<link rel="stylesheet" type="text/css" href="/static/styles.css?{{rand}}">
{% if debug %}
	<!-- Developer Version of vue.js because debug=true -->
	<script src="/static/vue.js"></script>
{% else %}  
	<script src="/static/vue.min.js"></script>
{% endif %}
</head>
<body>
{% include "includes/overlay.html" %}
<div class="row holder">
	{% block sidebar %}
	{% include "includes/sidebar.html" %}
	{% endblock %}
	<main>		
		{% if specter.config.auth!="none" and current_user.is_authenticated %}
		<a class="logout" href="{{ url_for('logout') }}"><img src="/static/img/exit_from_app-24px.svg" style="width: 24px;"/><div>Logout</div></a>
		{% else %}
		<div><br><br></div>
		{% endif %}
		<img id="menubtn" src="/static/img/menu.svg"/>

		{% with messages = get_flashed_messages() %}
		{% if messages %}
			<div class="notification error">
				<ul>
				{% for message in messages %}
				<li>{{ message }}</li>
				{% endfor %}
				</ul>
			</div>
		{% endif %}
		{% endwith %}
		{% if error %}
		<div class="notification error">
			ERROR: {{error}}
		</div>
		{% endif %}
		{% block main %}
		{% if error %}
		<br><br>Something went wrong :(<br><br>{{error}}
		{% else %}
		<br><br>Nothing here
		{% endif %}
		{% endblock %}

	</main>

</div>
<div class="loader" id="loader">
	<img src="/static/img/loader.gif"/>
	<h1>It may take a while...</h1>
</div>
<script type="text/javascript">
function showLoader(){
	console.log("Loading");
	window.setTimeout(()=>{
		document.getElementById("loader").style.display = "flex";
	}, 1000);
}
function hideLoader(){
	document.getElementById("loader").style.display = "none";
}
function sideToggle(){
    let el = document.getElementById("side-content");
    el.classList.toggle("active");
}
window.addEventListener('load', (event) => {
    let main = document.getElementsByTagName("main")[0];
    main.addEventListener('click', (event) => {
        document.getElementById("side-content").classList.remove("active");
    });
    let menubtn = document.getElementById("menubtn");
    menubtn.addEventListener('click', (event) => {
    	document.getElementById("side-content").classList.add("active");
    	event.stopPropagation();
    });
});
</script>
{% block scripts %}
{% endblock %}
</body>
</html>
